import{_ as i,c as a,o as n,aG as l}from"./chunks/framework.Bwfhi3i_.js";const C=JSON.parse('{"title":"高级SQL特性","description":"","frontmatter":{"title":"高级SQL特性","author":"Zack Zheng","date":"2025/06/19 09:38","categories":["SQL必知必会"],"tags":["SQL"]},"headers":[],"relativePath":"books/techAndCodes/SQL必知必会/高级SQL特性.md","filePath":"books/techAndCodes/SQL必知必会/高级SQL特性.md","lastUpdated":1750407879000}'),e={name:"books/techAndCodes/SQL必知必会/高级SQL特性.md"};function p(h,s,t,k,r,B){return n(),a("div",null,[...s[0]||(s[0]=[l(`<h5 id="约束" tabindex="-1">约束 <a class="header-anchor" href="#约束" aria-label="Permalink to &quot;约束&quot;">​</a></h5><h6 id="引用完整性" tabindex="-1">引用完整性 <a class="header-anchor" href="#引用完整性" aria-label="Permalink to &quot;引用完整性&quot;">​</a></h6><h6 id="主键" tabindex="-1">主键 <a class="header-anchor" href="#主键" aria-label="Permalink to &quot;主键&quot;">​</a></h6><ul><li>任意两行的主键值都不相同</li><li>每行都具有一个主键值（列中不允许出现NULL）</li><li>包含主键的列从不修改或更新</li><li>主键值不能重用。如果从表中删除某一行，其主键值不分配给新行</li></ul><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes one-dark-pro material-theme-palenight vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#61AFEF;--shiki-dark:#82AAFF;"> Vendors</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;"> </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">  vend_id      </span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;">CHAR</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#F78C6C;">10</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">)      </span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">NOT NULL</span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">  vend_name    </span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;">CHAR</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#F78C6C;">50</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">)      </span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">NOT NULL</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">  vend_address </span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;">CHAR</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#F78C6C;">50</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">)      </span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">  vend_city    </span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;">CHAR</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#F78C6C;">50</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">)      </span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">  vend_state   </span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;">CHAR</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#F78C6C;">5</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">)       </span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">  vend_zip     </span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;">CHAR</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#F78C6C;">10</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">)      </span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">  vend_country </span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;">CHAR</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#F78C6C;">50</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">)      </span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">NULL</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes one-dark-pro material-theme-palenight vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;"> Vendors</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">ADD</span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;"> CONSTRAINT</span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;"> (vend_id);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h6 id="外键" tabindex="-1">外键 <a class="header-anchor" href="#外键" aria-label="Permalink to &quot;外键&quot;">​</a></h6><p>表中一列，值在另一表中是主键</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes one-dark-pro material-theme-palenight vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#61AFEF;--shiki-dark:#82AAFF;"> Orders</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;"> </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">  order_num        </span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">        NOT NULL</span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">  order_date       </span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">DATETIME</span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">       NOT NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">  cust_id          </span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;">CHAR</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#F78C6C;">10</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">)       </span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">NOT NULL</span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;"> REFERENCES</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;"> Customers(cust_id) </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes one-dark-pro material-theme-palenight vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;"> Orders</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">ADD</span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;"> CONSTRAINT</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;">FOREIGN KEY</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;"> (cust_id) </span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;"> Customers(cust_id);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h6 id="唯一约束" tabindex="-1">唯一约束 <a class="header-anchor" href="#唯一约束" aria-label="Permalink to &quot;唯一约束&quot;">​</a></h6><p>保证一列或一组列中的数据是唯一的，类似于主键，区别如下：</p><ul><li>表可以包含多个唯一约束，但每个表只允许1个主键</li><li>唯一约束列可以包含NULL值</li><li>唯一约束列可以修改和更新</li><li>唯一约束列的值可重复使用</li><li>与主键不一样，唯一约束不能用来定义外键</li></ul><p>可以使用关键字<code>UNIQUE</code>和<code>CONSTRAINT</code>定义</p><h6 id="检查约束" tabindex="-1">检查约束 <a class="header-anchor" href="#检查约束" aria-label="Permalink to &quot;检查约束&quot;">​</a></h6><p>用来保证一列中的数据满足一组指定条件</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes one-dark-pro material-theme-palenight vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#61AFEF;--shiki-dark:#82AAFF;"> OrderItems</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;"> </span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">(</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">  order_num      </span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">      NOT NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">  order_item     </span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">      NOT NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">  prod_id        </span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;">CHAR</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#F78C6C;">10</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">)     </span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">NOT NULL</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">,</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">  quantity       </span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">      NOT NULL</span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;"> CHECK</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;"> (quantity </span><span style="--shiki-light:#56B6C2;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#D19A66;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">),</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">  item_price     </span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;">MONEY</span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">        NOT NULL</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes one-dark-pro material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">ADD</span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;"> CONSTRAINT</span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;"> CHECK</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;"> (gender </span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">LIKE</span><span style="--shiki-light:#98C379;--shiki-dark:#89DDFF;"> &#39;</span><span style="--shiki-light:#98C379;--shiki-dark:#C3E88D;">[MF]</span><span style="--shiki-light:#98C379;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="索引" tabindex="-1">索引 <a class="header-anchor" href="#索引" aria-label="Permalink to &quot;索引&quot;">​</a></h5><p>索引用来排序数据以加快搜索和排序操作的速度<br> 通过在列上定义索引来加快查找的速度</p><ul><li>索引加快了检索性能，降低了插入、修改和删除的性能（因为要动态更新索引）</li><li>索引数据可能会大量占用存储空间</li><li>不是所有列适合做索引，经常要排序的列适合做索引，索引可以同时定义多个列</li></ul><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes one-dark-pro material-theme-palenight vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#61AFEF;--shiki-dark:#82AAFF;"> prod_name_ind</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#F78C6C;">ON</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;"> Products (prod_name);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="触发器trigger" tabindex="-1">触发器TRIGGER <a class="header-anchor" href="#触发器trigger" aria-label="Permalink to &quot;触发器TRIGGER&quot;">​</a></h5><p>特定数据库活动自动执行的存储过程</p>`,24)])])}const A=i(e,[["render",p]]);export{C as __pageData,A as default};
