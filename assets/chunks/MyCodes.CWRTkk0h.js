const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/prism-core.D9r3ghuT.js","assets/chunks/theme.cKJFg-Aa.js","assets/chunks/framework.Nr4pRSPI.js","assets/chunks/prism.CHfJhim0.js"])))=>i.map(i=>d[i]);
import{d as w,p as d,v as b,q as F,G as t,a as s,aa as A,F as P,V as e}from"./framework.Nr4pRSPI.js";import{c as T,B as V,E as I,S as B,d as S,e as j}from"./theme.cKJFg-Aa.js";async function L(c){switch(c){case"java":return e(()=>import("./prism-java.Bz0cy7o8.js"),[]);case"javadoc":return e(()=>import("./prism-javadoc.DUqTwkXH.js"),[]);case"python":return e(()=>import("./prism-python.DhmbaUsA.js"),[]);case"py":return e(()=>import("./prism-python.DhmbaUsA.js"),[]);case"typescript":return e(()=>import("./prism-typescript.B2PMeEx1.js"),[]);case"ts":return e(()=>import("./prism-typescript.B2PMeEx1.js"),[]);case"css":return e(()=>import("./prism-css.Bpx-unsJ.js"),[]);case"c":return e(()=>import("./prism-core.D9r3ghuT.js").then(i=>i.p),__vite__mapDeps([0,1,2]));case"cs":return e(()=>import("./prism-csharp.7E3wiX_c.js"),[]);case"cpp":return e(()=>import("./prism-cpp.DbuaX-PE.js"),[]);case"docker":return e(()=>import("./prism-docker.MnIa7k-I.js"),[]);case"git":return e(()=>import("./prism-git.CvFLRLFJ.js"),[]);case"go":return e(()=>import("./prism-go.CyY0RbE6.js"),[]);case"gradle":return e(()=>import("./prism-gradle.BW30H6f7.js"),[]);case"graphql":return e(()=>import("./prism-graphql.DJ177lJj.js"),[]);case"js":return e(()=>import("./prism-javascript.2LMHe_9g.js"),[]);case"jsdoc":return e(()=>import("./prism-jsdoc.BpbvKxX3.js"),[]);case"json":return e(()=>import("./prism-json.xwnKirkR.js"),[]);case"webmanifest":return e(()=>import("./prism-json.xwnKirkR.js"),[]);case"jsonp":return e(()=>import("./prism-jsonp.C1uf5MTF.js"),[]);case"jsx":return e(()=>import("./prism-jsx.BFrjWriI.js"),[]);case"kt":return e(()=>import("./prism-kotlin.B1uvbSyh.js"),[]);case"kts":return e(()=>import("./prism-kotlin.B1uvbSyh.js"),[]);case"less":return e(()=>import("./prism-less.B2VBxBo8.js"),[]);case"log":return e(()=>import("./prism-log.DNsUgrn8.js"),[]);case"md":return e(()=>import("./prism-markdown.4MKFcK2x.js"),[]);case"mongodb":return e(()=>import("./prism-mongodb.DZQkpe2U.js"),[]);case"perl":return e(()=>import("./prism-perl.pLE2KKOX.js"),[]);case"php":return e(()=>import("./prism-php.Y_bwvUTe.js"),[]);case"regex":return e(()=>import("./prism-regex.DCddBNSB.js"),[]);case"rust":return e(()=>import("./prism-rust.CyYQkVoq.js"),[]);case"ruby":return e(()=>import("./prism-ruby.pgU1Zfy6.js"),[]);case"rb":return e(()=>import("./prism-ruby.pgU1Zfy6.js"),[]);case"tsx":return k();case"sass":return e(()=>import("./prism-sass.COF7ESLM.js"),[]);case"scss":return e(()=>import("./prism-sass.COF7ESLM.js"),[]);case"scheme":return e(()=>import("./prism-scheme.C-I0-YuB.js"),[]);case"sql":return e(()=>import("./prism-sql.AgAyy5H_.js"),[]);case"swift":return e(()=>import("./prism-swift.-kriB360.js"),[]);case"yaml":return e(()=>import("./prism-yaml.Chm5ZdEN.js"),[]);case"yml":return e(()=>import("./prism-yaml.Chm5ZdEN.js"),[]);default:return"javascript"}}async function k(){await e(()=>import("./prism-typescript.B2PMeEx1.js"),[]),await e(()=>import("./prism-jsx.BFrjWriI.js"),[]),await e(()=>import("./prism-tsx.BJUXQzHQ.js"),[])}const $=w({props:{repo:{type:String,default:"o-bricks",required:!0},path:{type:String,default:"",required:!0},lang:{type:String,default:""},title:{type:String,default:"点我查看远程代码"},lazy:{type:Boolean,default:!1}},async setup(c){const{repo:i,path:n,lang:O,lazy:R,title:g}=c,E=d(null),u=d(""),_=d(!R),m="zack-xy",p=O||n.split(".").pop(),f=`https://api.github.com/repos/${m}/${i}/contents/${n}`;b(()=>{F(()=>u.value,r=>{r&&(window.Prism?L(p||"").then(()=>{window.Prism.highlightElement(E.value)}):e(()=>import("./prism.CHfJhim0.js").then(o=>o.p),__vite__mapDeps([3,1,2])).then(o=>{window.Prism=o,L(p||"").then(()=>{o.highlightElement(E.value)})}))},{immediate:!0})});async function v(){try{if(_.value){const r=await fetch(f);if(!r.ok)return T.warning({message:"获取代码失败 💔",description:r.status===404?"未找到代码资源 404":`请求发生错误，可能是GitHub API受限，状态码：${r.status}`,icon:()=>A(V,{style:"color: #faad14"})}),_.value=!1,()=>t("div",null,[t("p",null,[s("获取代码失败 💔")])]);const o=await r.json(),l=atob(o.content),D=new Uint8Array(l.length);for(let a=0;a<l.length;a++)D[a]=l.charCodeAt(a);const y=new TextDecoder("utf-8");u.value=y.decode(D),_.value=!1}return()=>t(P,null,[t(I,{style:{display:u.value?"none":"block"},image:I.PRESENTED_IMAGE_DEFAULT},{default:()=>[t(S,{style:{disabled:_},onClick:()=>h(),type:"primary"},{default:()=>[s("获取代码")],icon:()=>t(P,null,[t(j,null,null)])})],description:()=>_.value?t(B,null,null):t("span",null,[t("a",{href:`https://github.com/${m}/${i}/blob/main/${n}`,target:"_blank"},[g])])}),t("pre",{style:{padding:u.value?void 0:"0",margin:u.value?void 0:"0"}},[t("code",{ref:E,class:`language-${p}`},[u.value])])])}catch(r){return T.open({message:"获取代码失败 💔",description:String(r),icon:()=>A(V,{style:"color: #108ee9"})}),_.value=!1,()=>t("div",null,[t("p",null,[s("请求github代码出现错误")])])}}async function h(){_.value=!0,await v()}return!i||!n?()=>t("div",null,[t("p",null,[s("请传入仓库名：repo 和 文件路径：path 参数")])]):await v()}});export{$ as _};
