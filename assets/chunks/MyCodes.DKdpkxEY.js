const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/prism-core.BTefsQGu.js","assets/chunks/theme.CV9gevUY.js","assets/chunks/framework.CdnsPyyz.js","assets/chunks/prism.xUbxnyln.js"])))=>i.map(i=>d[i]);
import{d as O,p as m,v as f,q as F,G as t,a as r,F as D,V as e}from"./framework.CdnsPyyz.js";import{E as P,S as b,B as y,c as w}from"./theme.CV9gevUY.js";async function T(l){switch(l){case"java":return e(()=>import("./prism-java.Bz0cy7o8.js"),[]);case"javadoc":return e(()=>import("./prism-javadoc.DUqTwkXH.js"),[]);case"python":return e(()=>import("./prism-python.DhmbaUsA.js"),[]);case"py":return e(()=>import("./prism-python.DhmbaUsA.js"),[]);case"typescript":return e(()=>import("./prism-typescript.B2PMeEx1.js"),[]);case"ts":return e(()=>import("./prism-typescript.B2PMeEx1.js"),[]);case"css":return e(()=>import("./prism-css.Bpx-unsJ.js"),[]);case"c":return e(()=>import("./prism-core.BTefsQGu.js").then(_=>_.p),__vite__mapDeps([0,1,2]));case"cs":return e(()=>import("./prism-csharp.7E3wiX_c.js"),[]);case"cpp":return e(()=>import("./prism-cpp.DbuaX-PE.js"),[]);case"docker":return e(()=>import("./prism-docker.MnIa7k-I.js"),[]);case"git":return e(()=>import("./prism-git.CvFLRLFJ.js"),[]);case"go":return e(()=>import("./prism-go.CyY0RbE6.js"),[]);case"gradle":return e(()=>import("./prism-gradle.BW30H6f7.js"),[]);case"graphql":return e(()=>import("./prism-graphql.DJ177lJj.js"),[]);case"js":return e(()=>import("./prism-javascript.2LMHe_9g.js"),[]);case"jsdoc":return e(()=>import("./prism-jsdoc.BpbvKxX3.js"),[]);case"json":return e(()=>import("./prism-json.xwnKirkR.js"),[]);case"webmanifest":return e(()=>import("./prism-json.xwnKirkR.js"),[]);case"jsonp":return e(()=>import("./prism-jsonp.C1uf5MTF.js"),[]);case"jsx":return e(()=>import("./prism-jsx.BFrjWriI.js"),[]);case"kt":return e(()=>import("./prism-kotlin.B1uvbSyh.js"),[]);case"kts":return e(()=>import("./prism-kotlin.B1uvbSyh.js"),[]);case"less":return e(()=>import("./prism-less.B2VBxBo8.js"),[]);case"log":return e(()=>import("./prism-log.DNsUgrn8.js"),[]);case"md":return e(()=>import("./prism-markdown.4MKFcK2x.js"),[]);case"mongodb":return e(()=>import("./prism-mongodb.DZQkpe2U.js"),[]);case"perl":return e(()=>import("./prism-perl.pLE2KKOX.js"),[]);case"php":return e(()=>import("./prism-php.Y_bwvUTe.js"),[]);case"regex":return e(()=>import("./prism-regex.DCddBNSB.js"),[]);case"rust":return e(()=>import("./prism-rust.CyYQkVoq.js"),[]);case"ruby":return e(()=>import("./prism-ruby.pgU1Zfy6.js"),[]);case"rb":return e(()=>import("./prism-ruby.pgU1Zfy6.js"),[]);case"tsx":return e(()=>import("./prism-tsx.BJUXQzHQ.js"),[]);case"sass":return e(()=>import("./prism-sass.COF7ESLM.js"),[]);case"scss":return e(()=>import("./prism-sass.COF7ESLM.js"),[]);case"scheme":return e(()=>import("./prism-scheme.C-I0-YuB.js"),[]);case"sql":return e(()=>import("./prism-sql.AgAyy5H_.js"),[]);case"swift":return e(()=>import("./prism-swift.-kriB360.js"),[]);case"yaml":return e(()=>import("./prism-yaml.Chm5ZdEN.js"),[]);case"yml":return e(()=>import("./prism-yaml.Chm5ZdEN.js"),[]);default:return"javascript"}}const $=O({props:{repo:{type:String,default:"o-bricks"},path:{type:String,default:""},lang:{type:String,default:""},title:{type:String,default:"从Github拉取演示代码"},lazy:{type:Boolean,default:!1}},async setup(l){const{repo:_,path:o,lang:g,lazy:V,title:I}=l,p=m(null),n=m(""),a=m(!V),s="zack-xy",c=g||o.split(".").pop(),L=`https://api.github.com/repos/${s}/${_}/contents/${o}`;f(()=>{F(()=>n.value,u=>{u&&(window.Prism?T(c||"").then(()=>{window.Prism.highlightElement(p.value)}):e(()=>import("./prism.xUbxnyln.js").then(i=>i.p),__vite__mapDeps([3,1,2])).then(i=>{window.Prism=i,T(c||"").then(()=>{i.highlightElement(p.value)})}))},{immediate:!0})});async function v(){try{if(a.value){const u=await fetch(L);if(!u.ok)return()=>t("div",null,[t("p",null,[u.status===404?"未找到代码资源":"请求github代码出现错误，可能是因为GitHub API受限"]),t("p",null,[r("请重试，或自行访问："),t("a",{target:"_blank",rel:"noopener noreferrer",href:`https://github.com/${s}/${_}/blob/main/${o}`},[r("github代码地址")])])]);const i=await u.json(),d=atob(i.content),A=new Uint8Array(d.length);for(let E=0;E<d.length;E++)A[E]=d.charCodeAt(E);const h=new TextDecoder("utf-8");n.value=h.decode(A),a.value=!1}return()=>t(D,null,[t(P,{style:{display:n.value?"none":"block"},image:P.PRESENTED_IMAGE_DEFAULT},{default:()=>[t(y,{style:{disabled:a},onClick:()=>R(),type:"primary"},{default:()=>[r("获取代码")],icon:()=>t(D,null,[t(w,null,null)])})],description:()=>a.value?t(b,null,null):t("span",null,[I,r(":"),t("a",{href:`https://github.com/${s}/${_}/blob/main/${o}`,target:"_blank"},[r("链接")])])}),t("pre",{style:{padding:n.value?void 0:"0",margin:n.value?void 0:"0"}},[t("code",{ref:p,class:`language-${c}`},[n.value])])])}catch(u){return()=>t("div",null,[t("p",null,[r("请求github代码出现错误："),u]),t("p",null,[r("请重试，或自行访问"),t("a",{target:"_blank",rel:"noopener noreferrer",href:`https://github.com/${s}/${_}/blob/main/${o}`},[r("github代码地址")])])])}}async function R(){a.value=!0,await v()}return!_||!o?()=>t("div",null,[t("p",null,[r("请传入仓库名：repo 和 文件路径：path 参数")])]):await v()}});export{$ as _};
