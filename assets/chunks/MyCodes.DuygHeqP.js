const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/prism-core.CyuYTPig.js","assets/chunks/theme.BLzrDG4v.js","assets/chunks/framework.CdnsPyyz.js","assets/chunks/prism.D7uiXoa3.js"])))=>i.map(i=>d[i]);
import{d as h,p as m,v as O,q as f,G as t,a as r,F as D,V as e}from"./framework.CdnsPyyz.js";import{E as P,S as F,B as b,c as y}from"./theme.BLzrDG4v.js";async function T(c){switch(c){case"java":return e(()=>import("./prism-java.Bz0cy7o8.js"),[]);case"javadoc":return e(()=>import("./prism-javadoc.DUqTwkXH.js"),[]);case"python":return e(()=>import("./prism-python.DhmbaUsA.js"),[]);case"py":return e(()=>import("./prism-python.DhmbaUsA.js"),[]);case"typescript":return e(()=>import("./prism-typescript.B2PMeEx1.js"),[]);case"ts":return e(()=>import("./prism-typescript.B2PMeEx1.js"),[]);case"css":return e(()=>import("./prism-css.Bpx-unsJ.js"),[]);case"c":return e(()=>import("./prism-core.CyuYTPig.js").then(u=>u.p),__vite__mapDeps([0,1,2]));case"cs":return e(()=>import("./prism-csharp.7E3wiX_c.js"),[]);case"cpp":return e(()=>import("./prism-cpp.DbuaX-PE.js"),[]);case"docker":return e(()=>import("./prism-docker.MnIa7k-I.js"),[]);case"git":return e(()=>import("./prism-git.CvFLRLFJ.js"),[]);case"go":return e(()=>import("./prism-go.CyY0RbE6.js"),[]);case"gradle":return e(()=>import("./prism-gradle.BW30H6f7.js"),[]);case"graphql":return e(()=>import("./prism-graphql.DJ177lJj.js"),[]);case"js":return e(()=>import("./prism-javascript.2LMHe_9g.js"),[]);case"jsdoc":return e(()=>import("./prism-jsdoc.BpbvKxX3.js"),[]);case"json":return e(()=>import("./prism-json.xwnKirkR.js"),[]);case"webmanifest":return e(()=>import("./prism-json.xwnKirkR.js"),[]);case"jsonp":return e(()=>import("./prism-jsonp.C1uf5MTF.js"),[]);case"jsx":return e(()=>import("./prism-jsx.BFrjWriI.js"),[]);case"kt":return e(()=>import("./prism-kotlin.B1uvbSyh.js"),[]);case"kts":return e(()=>import("./prism-kotlin.B1uvbSyh.js"),[]);case"less":return e(()=>import("./prism-less.B2VBxBo8.js"),[]);case"log":return e(()=>import("./prism-log.DNsUgrn8.js"),[]);case"md":return e(()=>import("./prism-markdown.4MKFcK2x.js"),[]);case"mongodb":return e(()=>import("./prism-mongodb.DZQkpe2U.js"),[]);case"perl":return e(()=>import("./prism-perl.pLE2KKOX.js"),[]);case"php":return e(()=>import("./prism-php.Y_bwvUTe.js"),[]);case"regex":return e(()=>import("./prism-regex.DCddBNSB.js"),[]);case"rust":return e(()=>import("./prism-rust.CyYQkVoq.js"),[]);case"ruby":return e(()=>import("./prism-ruby.pgU1Zfy6.js"),[]);case"rb":return e(()=>import("./prism-ruby.pgU1Zfy6.js"),[]);case"tsx":return e(()=>import("./prism-tsx.BJUXQzHQ.js"),[]);case"sass":return e(()=>import("./prism-sass.COF7ESLM.js"),[]);case"scss":return e(()=>import("./prism-sass.COF7ESLM.js"),[]);case"scheme":return e(()=>import("./prism-scheme.C-I0-YuB.js"),[]);case"sql":return e(()=>import("./prism-sql.AgAyy5H_.js"),[]);case"swift":return e(()=>import("./prism-swift.-kriB360.js"),[]);case"yaml":return e(()=>import("./prism-yaml.Chm5ZdEN.js"),[]);case"yml":return e(()=>import("./prism-yaml.Chm5ZdEN.js"),[]);default:return"javascript"}}const C=h({props:{repo:{type:String,default:"o-bricks"},path:{type:String,default:""},lang:{type:String,default:""},lazy:{type:Boolean,default:!1}},async setup(c){const{repo:u,path:o,lang:V,lazy:g}=c,p=m(null),n=m(""),a=m(!g),s="zack-xy",l=V||o.split(".").pop(),I=`https://api.github.com/repos/${s}/${u}/contents/${o}`;O(()=>{f(()=>n.value,_=>{_&&(window.Prism?T(l||"").then(()=>{window.Prism.highlightElement(p.value)}):e(()=>import("./prism.D7uiXoa3.js").then(i=>i.p),__vite__mapDeps([3,1,2])).then(i=>{window.Prism=i,T(l||"").then(()=>{i.highlightElement(p.value)})}))},{immediate:!0})});async function v(){try{if(a.value){const _=await fetch(I);if(!_.ok)return()=>t("div",null,[t("p",null,[_.status===404?"未找到代码资源":"请求github代码出现错误，可能是因为GitHub API受限"]),t("p",null,[r("请重试，或自行访问："),t("a",{target:"_blank",rel:"noopener noreferrer",href:`https://github.com/${s}/${u}/blob/main/${o}`},[r("github代码地址")])])]);const i=await _.json(),d=atob(i.content),A=new Uint8Array(d.length);for(let E=0;E<d.length;E++)A[E]=d.charCodeAt(E);const R=new TextDecoder("utf-8");n.value=R.decode(A),a.value=!1}return()=>t(D,null,[t(P,{style:{display:n.value?"none":"block"},image:P.PRESENTED_IMAGE_DEFAULT},{default:()=>[t(b,{style:{disabled:a},onClick:()=>L(),type:"primary"},{default:()=>[r("获取代码")],icon:()=>t(D,null,[t(y,null,null)])})],description:()=>a.value?t(F,null,null):t("span",null,[r("从Github拉取演示代码:"),t("a",{href:`https://github.com/${s}/${u}/blob/main/${o}`,target:"_blank"},[r("链接")])])}),t("pre",{style:{padding:n.value?void 0:"0",margin:n.value?void 0:"0"}},[t("code",{ref:p,class:`language-${l}`},[n.value])])])}catch(_){return()=>t("div",null,[t("p",null,[r("请求github代码出现错误："),_]),t("p",null,[r("请重试，或自行访问"),t("a",{target:"_blank",rel:"noopener noreferrer",href:`https://github.com/${s}/${u}/blob/main/${o}`},[r("github代码地址")])])])}}async function L(){a.value=!0,await v()}return!u||!o?()=>t("div",null,[t("p",null,[r("请传入仓库名：repo 和 文件路径：path 参数")])]):await v()}});export{C as _};
