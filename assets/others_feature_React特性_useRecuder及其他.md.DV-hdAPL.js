import{_ as r}from"./chunks/MyCodes.CKR56W69.js";import{_ as F}from"./chunks/theme.B4LNo5JK.js";import{_ as d,c as B,o as t,j as i,G as a,b as l,aG as D,a as n,w as h,aH as k}from"./chunks/framework.DsljODgs.js";const f=JSON.parse('{"title":"useRecuder和startTransition、useTransition、useDeferredValue、传送门","description":"","frontmatter":{"title":"useRecuder和startTransition、useTransition、useDeferredValue、传送门","author":"Zack Zheng","date":"2025/02/27 11:04","categories":["何以编程"],"tags":["React"]},"headers":[],"relativePath":"others/feature/React特性/useRecuder及其他.md","filePath":"others/feature/React特性/useRecuder及其他.md","lastUpdated":1759066681000}'),o={name:"others/feature/React特性/useRecuder及其他.md"};function g(y,s,u,c,A,C){const p=F,e=r;return t(),B("div",null,[s[0]||(s[0]=i("h4",{id:"usereducer",tabindex:"-1"},[n("useReducer "),i("a",{class:"header-anchor",href:"#usereducer","aria-label":'Permalink to "useReducer"'},"​")],-1)),s[1]||(s[1]=i("p",null,"useState 的替代方案。它接收一个形如 (state, action) => newState 的 reducer，并返回当前的 state 以及与其配套的 dispatch 方法",-1)),a(p,{src:"https://gitee.com/zackzhengxy/picGallery/raw/main/imgs/useReducer是什么.png",lazy:""}),s[2]||(s[2]=i("p",null,[i("code",null,"const [state, dispatch] = useReducer(reducer, initialArg, init);")],-1)),s[3]||(s[3]=i("ol",null,[i("li",null,"reducer是一个处理函数，用于更新状态，接收两个参数：当前状态和一个动作对象，返回一个新的状态。"),i("li",null,"initialArg是state的初始值"),i("li",null,"init是一个可选的函数，用于初始化修改state（修改state，传入的参数是初始化的state即initialArg），如果编写了init函数，默认使用init函数的返回值，否则使用initialArg")],-1)),(t(),l(k,null,{default:h(()=>[a(e,{title:"useReducer使用示例代码",repo:"o-bricks",path:"demoCodes/React/react-demo/src/useReducer.tsx",lazy:""})]),_:1})),s[4]||(s[4]=i("hr",null,null,-1)),s[5]||(s[5]=i("h4",{id:"usesyncexternalstore",tabindex:"-1"},[i("a",{href:"https://zh-hans.react.dev/reference/react/useSyncExternalStore",target:"_blank",rel:"noreferrer"},"useSyncExternalStore"),n(),i("a",{class:"header-anchor",href:"#usesyncexternalstore","aria-label":'Permalink to "[useSyncExternalStore](https://zh-hans.react.dev/reference/react/useSyncExternalStore)"'},"​")],-1)),s[6]||(s[6]=i("p",null,"useSyncExternalStore = React 官方提供的“把外部数据源订阅+快照”封装成 Hook，使它表现得像 React 内部状态一样。",-1)),s[7]||(s[7]=i("p",null,[i("code",null,"const snapshot = useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot?)")],-1)),s[8]||(s[8]=i("ul",null,[i("li",null,"subscribe: 一个函数，接收一个callback参数(当store发生改变时应该调用提供的callback),返回一个函数用于取消订阅"),i("li",null,"getSnapshot: 一个函数，返回组件需要的 store 中的数据快照"),i("li",null,"getServerSnapshot: 可选，一个函数，返回 store 中数据的初始快照。用于服务端渲染")],-1)),(t(),l(k,null,{default:h(()=>[a(e,{title:"自定义hook，store来自localStorage",repo:"o-bricks",path:"demoCodes/React/react-demo/src/useSyncExternalStore1.ts",lazy:""})]),_:1})),(t(),l(k,null,{default:h(()=>[a(e,{title:"自定义hook，store来自window.location.href",repo:"o-bricks",path:"demoCodes/React/react-demo/src/useSyncExternalStore2.ts",lazy:""})]),_:1})),s[9]||(s[9]=i("hr",null,null,-1)),s[10]||(s[10]=i("h5",{id:"starttransition、usetransition",tabindex:"-1"},[n("startTransition、useTransition "),i("a",{class:"header-anchor",href:"#starttransition、usetransition","aria-label":'Permalink to "startTransition、useTransition"'},"​")],-1)),s[11]||(s[11]=i("p",null,[n("辅助使用startTransition"),i("br"),n(" useTransition会得到一个表示过渡任务的等待状态，和一个启动该过渡任务的函数")],-1)),s[12]||(s[12]=i("p",null,[i("code",null,"const [isPending, startTransition] = useTransition()")],-1)),(t(),l(k,null,{default:h(()=>[a(e,{title:"useTransition使用示例",repo:"o-bricks",path:"demoCodes/React/react-demo/src/useTransition.tsx",lazy:""})]),_:1})),s[13]||(s[13]=i("hr",null,null,-1)),s[14]||(s[14]=i("h5",{id:"usedeferredvalue",tabindex:"-1"},[n("useDeferredValue "),i("a",{class:"header-anchor",href:"#usedeferredvalue","aria-label":'Permalink to "useDeferredValue"'},"​")],-1)),s[15]||(s[15]=i("p",null,"功能和useTransition类似，都是为了性能优化使用的",-1)),a(p,{src:"https://gitee.com/zackzhengxy/picGallery/raw/main/imgs/useTransition和useDeferredValue的区别.png",lazy:""}),s[16]||(s[16]=D(`<hr><h4 id="传送门" tabindex="-1">传送门 <a class="header-anchor" href="#传送门" aria-label="Permalink to &quot;传送门&quot;">​</a></h4><p>createPortal</p><h4 id="异步组件" tabindex="-1">异步组件 <a class="header-anchor" href="#异步组件" aria-label="Permalink to &quot;异步组件&quot;">​</a></h4><p>React.lazy与React.Suspense</p><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes one-dark-pro material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#C678DD;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">import</span><span style="--shiki-light:#E06C75;--shiki-dark:#BABED8;"> React</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#BABED8;"> Suspense</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;"> }</span><span style="--shiki-light:#C678DD;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> from</span><span style="--shiki-light:#98C379;--shiki-dark:#89DDFF;"> &#39;</span><span style="--shiki-light:#98C379;--shiki-dark:#C3E88D;">react</span><span style="--shiki-light:#98C379;--shiki-dark:#89DDFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">import</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;"> {</span><span style="--shiki-light:#E06C75;--shiki-dark:#BABED8;"> useState</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;"> }</span><span style="--shiki-light:#C678DD;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> from</span><span style="--shiki-light:#98C379;--shiki-dark:#89DDFF;"> &#39;</span><span style="--shiki-light:#98C379;--shiki-dark:#C3E88D;">react</span><span style="--shiki-light:#98C379;--shiki-dark:#89DDFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#E5C07B;--shiki-dark:#BABED8;"> Welcome</span><span style="--shiki-light:#56B6C2;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#BABED8;"> React</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#82AAFF;">lazy</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;"> =&gt;</span><span style="--shiki-light:#61AFEF;--shiki-dark:#89DDFF;"> import</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#98C379;--shiki-dark:#C3E88D;">./components/Welcome</span><span style="--shiki-light:#98C379;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">))</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#E5C07B;--shiki-dark:#BABED8;"> Welcome2</span><span style="--shiki-light:#56B6C2;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#E5C07B;--shiki-dark:#BABED8;"> React</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#61AFEF;--shiki-dark:#82AAFF;">lazy</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;"> =&gt;</span><span style="--shiki-light:#61AFEF;--shiki-dark:#89DDFF;"> import</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">(</span><span style="--shiki-light:#98C379;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#98C379;--shiki-dark:#C3E88D;">./components/Welcome2</span><span style="--shiki-light:#98C379;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">)) </span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">export</span><span style="--shiki-light:#C678DD;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> default</span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;"> function</span><span style="--shiki-light:#61AFEF;--shiki-dark:#82AAFF;"> App</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;">  const</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;"> [</span><span style="--shiki-light:#E5C07B;--shiki-dark:#BABED8;"> show</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#E5C07B;--shiki-dark:#BABED8;"> setShow</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;"> ]</span><span style="--shiki-light:#56B6C2;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#61AFEF;--shiki-dark:#82AAFF;"> useState</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#FF9CAC;">true</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#F07178;">)</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;">  const</span><span style="--shiki-light:#61AFEF;--shiki-dark:#BABED8;"> handleClick</span><span style="--shiki-light:#56B6C2;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;"> ()</span><span style="--shiki-light:#C678DD;--shiki-dark:#C792EA;"> =&gt;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#61AFEF;--shiki-dark:#82AAFF;">    setShow</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#D19A66;--shiki-dark:#FF9CAC;">false</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#F07178;">)</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  return</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#F07178;"> (</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">    &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">      &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#F07178;">h2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">hello lazy</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#F07178;">h2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">      &lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#F07178;">button</span><span style="--shiki-light:#D19A66;--shiki-light-font-style:italic;--shiki-dark:#C792EA;--shiki-dark-font-style:inherit;"> onClick</span><span style="--shiki-light:#56B6C2;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#C678DD;--shiki-dark:#89DDFF;">{</span><span style="--shiki-light:#E06C75;--shiki-dark:#BABED8;">handleClick</span><span style="--shiki-light:#C678DD;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">点击</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#F07178;">button</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">      &lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#FFCB6B;">Suspense</span><span style="--shiki-light:#D19A66;--shiki-light-font-style:italic;--shiki-dark:#C792EA;--shiki-dark-font-style:inherit;"> fallback</span><span style="--shiki-light:#56B6C2;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#C678DD;--shiki-dark:#89DDFF;">{</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">&lt;</span><span style="--shiki-light:#E06C75;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#BABED8;">loading...</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">&lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">&gt;</span><span style="--shiki-light:#C678DD;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#C678DD;--shiki-dark:#89DDFF;">        {</span><span style="--shiki-light:#E06C75;--shiki-dark:#BABED8;">show</span><span style="--shiki-light:#C678DD;--shiki-dark:#89DDFF;"> ?</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#FFCB6B;">Welcome</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;"> /&gt;</span><span style="--shiki-light:#C678DD;--shiki-dark:#89DDFF;"> :</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;"> &lt;</span><span style="--shiki-light:#E5C07B;--shiki-dark:#FFCB6B;">Welcome2</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;"> /&gt;</span><span style="--shiki-light:#C678DD;--shiki-dark:#89DDFF;">}</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">      &lt;/</span><span style="--shiki-light:#E5C07B;--shiki-dark:#FFCB6B;">Suspense</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">    &lt;/</span><span style="--shiki-light:#E06C75;--shiki-dark:#F07178;">div</span><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#F07178;">  )</span></span>
<span class="line"><span style="--shiki-light:#ABB2BF;--shiki-dark:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div>`,6))])}const S=d(o,[["render",g]]);export{f as __pageData,S as default};
