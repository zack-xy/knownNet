import{_ as s,c as a,o as n,a as l}from"./app.23892b4f.js";const d=JSON.parse('{"title":"从哪些点做性能优化","description":"","frontmatter":{"title":"从哪些点做性能优化","author":"Zack Zheng","date":"2022/02/16 09:51","categories":["大海拾遗"],"tags":["性能优化"]},"headers":[{"level":3,"title":"从哪些点做性能优化","slug":"从哪些点做性能优化","link":"#从哪些点做性能优化","children":[]}],"relativePath":"program/pieces/2021/09/01/从哪些点做性能优化.md","lastUpdated":1684224278000}'),p={name:"program/pieces/2021/09/01/从哪些点做性能优化.md"},e=l(`<h3 id="从哪些点做性能优化" tabindex="-1">从哪些点做性能优化 <a class="header-anchor" href="#从哪些点做性能优化" aria-hidden="true">#</a></h3><h4 id="加载" tabindex="-1">加载 <a class="header-anchor" href="#加载" aria-hidden="true">#</a></h4><ol><li>减少http请求（精灵图、文件的合并）</li><li>减小文件大小（资源压缩，图片压缩，代码压缩）</li><li>CDN（第三方库，大文件、大图）</li><li>SSR服务端渲染、预渲染</li><li>懒加载(<a href="https://github.com/zack-xy/o-bricks/blob/main/imgLazyLoad/readme.md" target="_blank" rel="noreferrer">实现一个乞丐版懒加载</a>)</li><li>分包（加快主页的加载）</li></ol><h4 id="减少dom操作-避免回流-文档碎片" tabindex="-1">减少DOM操作，避免回流，文档碎片 <a class="header-anchor" href="#减少dom操作-避免回流-文档碎片" aria-hidden="true">#</a></h4><h4 id="内存泄漏及优化" tabindex="-1">内存泄漏及优化 <a class="header-anchor" href="#内存泄漏及优化" aria-hidden="true">#</a></h4><ol><li><p>过多的缓存未释放</p></li><li><p>闭包太多未释放</p></li><li><p>定时器或者回调太多未释放</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight vp-code-dark"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> someResource </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getData</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#82AAFF;">setInterval</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getElementById</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Node</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">innerHTML</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">someResource</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 定时器没有清除，可以清除掉</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// node，someResource存储了大量数据，无法回收</span></span>
<span class="line"><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light"><code><span class="line"><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">someResource</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">getData</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;">setInterval</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">node</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;Node&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">node</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">node</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">innerHTML</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">stringify</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">someResource</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 定时器没有清除，可以清除掉</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// node，someResource存储了大量数据，无法回收</span></span>
<span class="line"><span style="color:#ABB2BF;">}, </span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li><li><p>太多无效的DOM未释放</p></li><li><p>全局变量太多未被发现（减少不必要的全局变量，使用严格模式避免意外的全局变量）</p></li></ol>`,6),o=[e];function r(t,c,i,y,B,F){return n(),a("div",null,o)}const D=s(p,[["render",r]]);export{d as __pageData,D as default};
