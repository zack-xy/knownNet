import{_ as s,c as n,o as a,a as l}from"./app.21fa3df7.js";const u=JSON.parse('{"title":"Docker常用命令","description":"","frontmatter":{"title":"Docker常用命令","author":"Zack Zheng","date":"2023/03/24 15:59","categories":["大海拾遗"],"tags":["Docker"]},"headers":[{"level":3,"title":"帮助启动类命令","slug":"帮助启动类命令","link":"#帮助启动类命令","children":[]},{"level":3,"title":"镜像命令","slug":"镜像命令","link":"#镜像命令","children":[]},{"level":3,"title":"容器命令","slug":"容器命令","link":"#容器命令","children":[]}],"relativePath":"program/pieces/2023/03/24/docker常用命令.md","lastUpdated":1681282850000}'),p={name:"program/pieces/2023/03/24/docker常用命令.md"},e=l(`<h3 id="帮助启动类命令" tabindex="-1">帮助启动类命令 <a class="header-anchor" href="#帮助启动类命令" aria-hidden="true">#</a></h3><p>== systemctl是Centos中管理后台运行的服务 ==</p><ul><li>启动Docker: <code>systemctl start docker</code></li><li>停止Docker: <code>systemctl stop docker</code></li><li>重启Docker: <code>systemctl restart docker</code></li><li>查看Docker状态: <code>systemctl status docker</code></li><li>开机启动: <code>systemctl enable docker</code></li><li>查看Docker概要信息: <code>docker info</code></li><li>查看Docker总体帮助文档: <code>docker --help</code></li><li>查看Docker命令帮助文档: <code>docker 具体命令 --help</code></li></ul><h3 id="镜像命令" tabindex="-1">镜像命令 <a class="header-anchor" href="#镜像命令" aria-hidden="true">#</a></h3><ul><li><p>列出本地主机上的镜像：<code>docker images </code><br> OPTIONS:<br> -a: 列出本地所有镜像（含历史镜像层）<br> -q: 只显示镜像id</p></li><li><p>查某个镜像：<code>docker search 某个xx镜像名字 </code></p><p>OPTIONS:</p><p>--limit: 只列出N个镜像，默认25个</p></li><li><p>拉某个镜像: <code>docker pull 某个xx镜像名字</code></p><p>docker pull 镜像名字[:TAG]，比如docker pull redis:6.0.8</p><p>没有TAG就是最新版，等价于docker pull 镜像名字:lates</p></li><li><p>查看镜像/容器/数据卷所占的空间：<code>docker system df</code></p></li><li><p>删除镜像：<code>docker rmi 某个XXX镜像名字/ ID</code></p><p>-f 强制删除</p><p>删除全部：docker rmi -f $(docker images -qa) // 注释：$()里面是【镜像命令】第一个列出了所有镜像只显示镜像id</p><p>❓什么是虚悬镜像❓:就是Repository(仓库名)和Tag(标签)都是<code>&lt;none&gt;</code>,这种镜像没什么用，可以删除</p></li></ul><h3 id="容器命令" tabindex="-1">容器命令 <a class="header-anchor" href="#容器命令" aria-hidden="true">#</a></h3><ul><li><p>新建+启动容器：<code>docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</code></p><p>OPTIONS:</p><p>--name=&quot;容器新名字&quot;</p><p>-d: 后台运行容器并返回容器id，即启动守护式容器（后台运行）</p><p>-i: 以交互模式运行容器，通常与-t同时使用</p><p>-t：为容器重新分配一个伪输入终端，通常与-i一起使用（启动交互式容器）</p><p>(例子：docker run -it --name=my-ubuntu ubuntu /bin/bash)</p><p>-P：随机端口映射</p><p>-p：指定端口映射. -p 8080:80</p></li><li><p>列出正在运行的容器：<code>docker ps [OPTIONS]</code></p><p>OPTIONS:</p><p>-a: 列出当前所有正在运行的容器+历史运行过的</p><p>-l: 显示最近创建的容器</p><p>-n：显示最近n个创建的容器</p><p>-q： 静默模式，只显示容器编号</p></li><li><p>退出容器</p><ul><li>exit run进去容器，exit退出，容器停止</li><li>ctrl+p+q run进去容器,容器不停止</li></ul></li><li><p>启动停止的容器：<code>docker start 容器ID或者容器名 </code></p></li><li><p>重启容器： <code>docker restart 容器ID或者容器名</code></p></li><li><p>停止容器: <code>docker stop 容器ID或者容器名</code></p></li><li><p>强制停止容器: <code>docker kill 容器ID或者容器名</code></p></li><li><p>删除已停止的容器: <code>docker rm 容器ID</code></p><p>一次性删除多个容器：</p><p>docker rm -f $(docker ps -a -q)</p><p>docker ps -a -q | xargs docker rm</p></li><li><p>查看容器网络</p><p><code>docker network ls</code></p><p><code>docker network inspect 容器名</code></p></li><li><p>查看容器日志： <code>docker logs 容器ID </code></p></li><li><p>查看容器内运行的进程： <code>docker top 容器ID </code></p></li><li><p>查看容器内部细节： <code>docker inspect 容器ID </code></p></li><li><p>进入正在运行的容器并以命令行交互：</p><ul><li><code>docker exec -it 容器ID bashShell</code> （打开新的终端，启动新的进程，使用exit退出不会导致容器停止 ）</li><li><code>docker attach 容器ID</code> （直接进入容器启动的命令终端，不会启动新的进程，用exit退出会导致容器停止）</li></ul></li><li><p>从容器内拷贝文件到主机 ： <code>docker cp 容器ID:容器内路径 目的主机路径</code></p></li><li><p>导入和导出容器：</p><p><code>docker export 容器ID &gt; 文件名.tar</code></p><p><code>cat 文件名.tar | docker import - 镜像用户/镜像名：镜像版本号 </code></p></li></ul><h4 id="docker-compose是啥" tabindex="-1">docker-compose是啥 <a class="header-anchor" href="#docker-compose是啥" aria-hidden="true">#</a></h4><p>Compose 项⽬是 Docker 官⽅的开源项⽬，负责实现对 Docker 容器集群的快速编排</p><p>允许⽤户通过⼀个单独的 docker-compose.yml 模板⽂件（YAML 格式） 来定义⼀组相关联的应⽤容器为⼀个项⽬</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight vp-code-dark"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Use root/example as user/password credentials</span></span>
<span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3.1</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">db</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># NOTE: use of &quot;mysql_native_password&quot; is not recommended: https://dev.mysql.com/doc/refman/8.0/en/upgrading-from-previous-series.html#upgrade-caching-sha2-password</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># (this is just an example, not intended to be a production configuration)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">command</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--default-authentication-plugin=mysql_native_password</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">restart</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">always</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">environment</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">MYSQL_ROOT_PASSWORD</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123456</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">3090:3306</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 前面一个端口是宿主机的端口，后面一个是adminer镜像端口, adminer是一个mysql管理客户端</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">adminer</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">adminer</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">restart</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">always</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">8090:8080</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 前面一个端口是宿主机的端口，后面一个是adminer端口</span></span>
<span class="line"></span></code></pre><pre class="shiki one-dark-pro vp-code-light"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># Use root/example as user/password credentials</span></span>
<span class="line"><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;3.1&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">services</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">db</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">image</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">mysql</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;"># NOTE: use of &quot;mysql_native_password&quot; is not recommended: https://dev.mysql.com/doc/refman/8.0/en/upgrading-from-previous-series.html#upgrade-caching-sha2-password</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;"># (this is just an example, not intended to be a production configuration)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">command</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">--default-authentication-plugin=mysql_native_password</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">restart</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">always</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">environment</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">MYSQL_ROOT_PASSWORD</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">123456</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">ports</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">3090:3306</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;"># 前面一个端口是宿主机的端口，后面一个是adminer镜像端口, adminer是一个mysql管理客户端</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">adminer</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">image</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">adminer</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">restart</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">always</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">ports</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">8090:8080</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;"># 前面一个端口是宿主机的端口，后面一个是adminer端口</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>运行<code>docker-compose up</code>启动多个镜像（参数-d后台启动）</p>`,12),o=[e];function c(r,t,i,d,y,m){return a(),n("div",null,o)}const B=s(p,[["render",c]]);export{u as __pageData,B as default};
